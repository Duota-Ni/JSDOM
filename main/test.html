<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <title>index</title>
    </head>
    <body>
        <canvas id="myCanvas">
            Your browser does not support the canvas element.
        </canvas>
        <script type="text/javascript">
            var canvas = document.getElementById("myCanvas");
            var context = canvas.getContext("2d");
            var img = new Image();
            img.src = "http://localhost:8080/blue.png";
            img.onload = function(){
               context.drawImage(img,0,0,800,500);
               img = context.getImageData(0,0,800,500);
               var piclength = 800 * 500;
               for(var i = 0;i < piclength*4;i += 4){
                   var myRed = img.data[i];
                   var myGreen = img.data[i + 1];
                   var myBlue = img.data[i + 2];
                   var myGray = parseInt((myRed + myGreen + myBlue )/3);
                   img.data[i] = myGray;
                   img.data[i + 1] = myGray;
                   img.data[i + 2] = myGray;
               }
               context.putImageData(img,0,0);
           }
        </script>
    </body>
    
</html>
